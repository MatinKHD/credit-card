import './polyfills.server.mjs';
import{a as ee,b as A,c as te,e as ie,g as ne,j as oe,l as se}from"./chunk-6KUIGUAD.mjs";import{i as Y}from"./chunk-M3MBJX2L.mjs";import{$a as l,Aa as C,Fa as F,Ga as j,Gb as Z,Ia as R,J as P,K as M,Ka as b,M as T,O as L,Rb as $,Sa as z,Sb as U,Ta as f,Tb as G,Ua as K,V as B,Va as w,Vb as W,W as m,Wa as u,X as h,Xa as a,Za as I,Zb as X,_a as _,ab as H,bb as Q,cb as q,da as E,db as p,eb as k,fb as J,hb as N,ma as D,wa as c}from"./chunk-U4FNL7X3.mjs";import{g as O}from"./chunk-X2SEQXRR.mjs";var ce=["input"];function me(n,o){if(n&1){let e=I();u(0,"span")(1,"input",2,0),_("click",function(i){m(e);let s=l();return h(s.onClick(i))})("paste",function(i){let s=m(e).index,r=l();return h(r.onPaste(i,s))})("input",function(i){let s=m(e).index,r=l();return h(r.onInput(i,s))})("keydown",function(i){let s=m(e).index,r=l();return h(r.onKeydown(i,s))}),a()()}if(n&2){let e=l();K("code-hidden",e.isCodeHidden),c(),f("type",e.inputType)("disabled",e.disabled),z("inputmode",e.inputMode)("autocapitalize",e.autocapitalize)}}var ue=new T("CodeInputComponentConfig"),re={codeLength:4,inputType:"tel",inputMode:"numeric",initialFocusField:void 0,isCharsCode:!1,isCodeHidden:!1,isPrevFocusableAfterClearing:!0,isFocusingOnLastByClickIfFilled:!1,code:void 0,disabled:!1,autocapitalize:void 0},x=function(n){return n[n.ready=0]="ready",n[n.reset=1]="reset",n}(x||{}),ae=(()=>{class n{constructor(e){if(this.isNonDigitsCode=!1,this.codeChanged=new E,this.codeCompleted=new E,this.placeholders=[],this.inputs=[],this.inputsStates=[],this.state={isFocusingAfterAppearingCompleted:!1,isInitialFocusFieldEnabled:!1},Object.assign(this,re),!!e)for(let t in e)e.hasOwnProperty(t)&&re.hasOwnProperty(t)&&(this[t]=e[t])}ngOnInit(){this.state.isInitialFocusFieldEnabled=!this.isEmpty(this.initialFocusField),this.onCodeLengthChanges()}ngAfterViewInit(){this.inputsListSubscription=this.inputsList.changes.subscribe(this.onInputsListChanges.bind(this)),this.onInputsListChanges(this.inputsList)}ngAfterViewChecked(){this.focusOnInputAfterAppearing()}ngOnChanges(e){e.code&&this.onInputCodeChanges(),e.codeLength&&this.onCodeLengthChanges()}ngOnDestroy(){this.inputsListSubscription&&this.inputsListSubscription.unsubscribe()}reset(e=!1){this.onInputCodeChanges(),this.state.isInitialFocusFieldEnabled&&this.focusOnField(this.initialFocusField),e&&this.emitChanges()}focusOnField(e){if(e>=this._codeLength)throw new Error("The index of the focusing input box should be less than the codeLength.");this.inputs[e].focus()}onClick(e){if(!this.isFocusingOnLastByClickIfFilled)return;let t=e.target,i=this.inputs[this._codeLength-1];t===i||!(this.getCurrentFilledCode().length>=this._codeLength)||setTimeout(()=>i.focus())}onInput(e,t){let i=e.target,s=e.data||i.value;if(this.isEmpty(s))return;if(!this.canInputValue(s)){e.preventDefault(),e.stopPropagation(),this.setInputValue(i,null),this.setStateForInput(i,x.reset);return}let r=s.toString().trim().split("");for(let d=0;d<r.length;d++){let v=d+t;if(v>this._codeLength-1)break;this.setInputValue(this.inputs[v],r[d])}this.emitChanges();let g=t+r.length;if(g>this._codeLength-1){i.blur();return}this.inputs[g].focus()}onPaste(e,t){e.preventDefault(),e.stopPropagation();let i=e.clipboardData?e.clipboardData.getData("text").trim():void 0;if(this.isEmpty(i))return;let s=i.split(""),r=0;for(let g=t;g<this.inputs.length&&r!==s.length;g++){let d=this.inputs[g],v=s[r];if(!this.canInputValue(v)){this.setInputValue(d,null),this.setStateForInput(d,x.reset);return}this.setInputValue(d,v.toString()),r++}this.inputs[t].blur(),this.emitChanges()}onKeydown(e,t){return O(this,null,function*(){let i=e.target,s=this.isEmpty(i.value),r=t-1,g=yield this.isBackspaceKey(e),d=this.isDeleteKey(e);!g&&!d||(e.preventDefault(),this.setInputValue(i,null),s||this.emitChanges(),!(r<0||d)&&(s||this.isPrevFocusableAfterClearing)&&this.inputs[r].focus())})}onInputCodeChanges(){if(!this.inputs.length)return;if(this.isEmpty(this.code)){this.inputs.forEach(i=>{this.setInputValue(i,null)});return}let e=this.code.toString().trim().split(""),t=!0;for(let i of e)if(!this.canInputValue(i)){t=!1;break}this.inputs.forEach((i,s)=>{let r=t?e[s]:null;this.setInputValue(i,r)})}onCodeLengthChanges(){if(this.codeLength)if(this._codeLength=this.codeLength,this._codeLength>this.placeholders.length){let e=Array(this._codeLength-this.placeholders.length).fill(1);this.placeholders.splice(this.placeholders.length-1,0,...e)}else this._codeLength<this.placeholders.length&&this.placeholders.splice(this._codeLength)}onInputsListChanges(e){if(e.length>this.inputs.length){let t=e.filter((s,r)=>r>this.inputs.length-1);this.inputs.splice(this.inputs.length,0,...t.map(s=>s.nativeElement));let i=Array(t.length).fill(x.ready);this.inputsStates.splice(this.inputsStates.length,0,...i)}else e.length<this.inputs.length&&(this.inputs.splice(e.length),this.inputsStates.splice(e.length));this.onInputCodeChanges()}focusOnInputAfterAppearing(){this.state.isInitialFocusFieldEnabled&&(this.state.isFocusingAfterAppearingCompleted||(this.focusOnField(this.initialFocusField),this.state.isFocusingAfterAppearingCompleted=document.activeElement===this.inputs[this.initialFocusField]))}emitChanges(){setTimeout(()=>this.emitCode(),50)}emitCode(){let e=this.getCurrentFilledCode();this.codeChanged.emit(e),e.length>=this._codeLength&&this.codeCompleted.emit(e)}getCurrentFilledCode(){let e="";for(let t of this.inputs)this.isEmpty(t.value)||(e+=t.value);return e}isBackspaceKey(e){return e.key&&e.key.toLowerCase()==="backspace"||e.keyCode&&e.keyCode===8?Promise.resolve(!0):!e.keyCode||e.keyCode!==229?Promise.resolve(!1):new Promise(i=>{setTimeout(()=>{let s=e.target,r=this.getStateForInput(s)===x.reset;r&&this.setStateForInput(s,x.ready),i(s.selectionStart===0&&!r)})})}isDeleteKey(e){return e.key&&e.key.toLowerCase()==="delete"||e.keyCode&&e.keyCode===46}setInputValue(e,t){let i=this.isEmpty(t),s="has-value",r="empty";i?(e.value="",e.classList.remove(s),e.parentElement.classList.add(r)):(e.value=t,e.classList.add(s),e.parentElement.classList.remove(r))}canInputValue(e){return this.isEmpty(e)?!1:/^[0-9]+$/.test(e.toString())||this.isCharsCode||this.isNonDigitsCode}setStateForInput(e,t){let i=this.inputs.indexOf(e);i<0||(this.inputsStates[i]=t)}getStateForInput(e){let t=this.inputs.indexOf(e);return this.inputsStates[t]}isEmpty(e){return e==null||!e.toString().length}static{this.\u0275fac=function(t){return new(t||n)(C(ue,8))}}static{this.\u0275cmp=F({type:n,selectors:[["code-input"]],viewQuery:function(t,i){if(t&1&&H(ce,5),t&2){let s;Q(s=q())&&(i.inputsList=s)}},inputs:{codeLength:"codeLength",inputType:"inputType",inputMode:"inputMode",initialFocusField:"initialFocusField",isNonDigitsCode:"isNonDigitsCode",isCharsCode:"isCharsCode",isCodeHidden:"isCodeHidden",isPrevFocusableAfterClearing:"isPrevFocusableAfterClearing",isFocusingOnLastByClickIfFilled:"isFocusingOnLastByClickIfFilled",code:"code",disabled:"disabled",autocapitalize:"autocapitalize"},outputs:{codeChanged:"codeChanged",codeCompleted:"codeCompleted"},standalone:!1,features:[B],decls:1,vars:1,consts:[["input",""],[3,"code-hidden",4,"ngFor","ngForOf"],["autocomplete","one-time-code",3,"click","paste","input","keydown","type","disabled"]],template:function(t,i){t&1&&b(0,me,3,6,"span",1),t&2&&f("ngForOf",i.placeholders)},dependencies:[U],styles:["[_nghost-%COMP%]{--text-security-type: disc;--item-spacing: 4px;--item-height: 4.375em;--item-border: 1px solid #dddddd;--item-border-bottom: 1px solid #dddddd;--item-border-has-value: 1px solid #dddddd;--item-border-bottom-has-value: 1px solid #dddddd;--item-border-focused: 1px solid #dddddd;--item-border-bottom-focused: 1px solid #dddddd;--item-shadow-focused: 0px 1px 5px rgba(221, 221, 221, 1);--item-border-radius: 5px;--item-background: transparent;--item-font-weight: 300;--color: #171516;display:flex;transform:translateZ(0);font-size:inherit;color:var(--color)}[_nghost-%COMP%]   span[_ngcontent-%COMP%]{display:block;flex:1;padding-right:var(--item-spacing)}[_nghost-%COMP%]   span[_ngcontent-%COMP%]:first-child{padding-left:var(--item-spacing)}[_nghost-%COMP%]   span.code-hidden[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{text-security:var(--text-security-type);-webkit-text-security:var(--text-security-type);-moz-text-security:var(--text-security-type)}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:var(--item-height);color:inherit;background:var(--item-background);text-align:center;font-size:inherit;font-weight:var(--item-font-weight);border:var(--item-border);border-bottom:var(--item-border-bottom);border-radius:var(--item-border-radius);-webkit-appearance:none;transform:translateZ(0);-webkit-transform:translate3d(0,0,0);outline:none}[_nghost-%COMP%]   input.has-value[_ngcontent-%COMP%]{border:var(--item-border-has-value);border-bottom:var(--item-border-bottom-has-value)}[_nghost-%COMP%]   input[_ngcontent-%COMP%]:focus{border:var(--item-border-focused);border-bottom:var(--item-border-bottom-focused);box-shadow:var(--item-shadow-focused)}"]})}}return n})(),le=(()=>{class n{static forRoot(e){return{ngModule:n,providers:[{provide:ue,useValue:e}]}}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275mod=j({type:n})}static{this.\u0275inj=M({imports:[W]})}}return n})();var y=class n{transform(o){return this.replaceFaNumbers(o)}replaceFaNumbers(o){let e=["\u06F0","\u06F1","\u06F2","\u06F3","\u06F4","\u06F5","\u06F6","\u06F7","\u06F8","\u06F9"],t=["0","1","2","3","4","5","6","7","8","9"];if(o){var i=o.replace(/./g,function(s){var r=e.indexOf(s);return r>-1?t[r]:s});return i}else return""}static \u0275fac=function(e){return new(e||n)};static \u0275pipe=R({name:"replaceNumber",type:n,pure:!0})};var S=class n{constructor(o,e){this.platformId=o;this._document=e;this.isInBrowser=X(this.platformId),this.isLocalStorageSupported=typeof localStorage<"u",this.isLocalSessionSupported=typeof sessionStorage<"u"}isInBrowser;isLocalStorageSupported;isLocalSessionSupported;get IsInBrowser(){return this.isInBrowser}document(){return this._document}get IsInMobile(){let o=navigator.userAgent||navigator.vendor;return/android/i.test(o)||/iPhone|ipad|iPod/i.test(o)}setItem(o,e){this.isInBrowser&&this.isLocalStorageSupported&&localStorage.setItem(o,e)}setItemSession(o,e){this.isInBrowser&&this.isLocalSessionSupported&&sessionStorage.setItem(o,e)}getItem(o){return this.isInBrowser&&this.isLocalStorageSupported?localStorage.getItem(o):null}getItemJson(o){return this.isInBrowser&&this.isLocalStorageSupported?JSON.parse(localStorage.getItem(o)):null}getItemSession(o){return this.isInBrowser&&this.isLocalSessionSupported?sessionStorage.getItem(o):null}clear(){this.isInBrowser&&this.isLocalStorageSupported&&localStorage.clear()}clearItems(o){if(this.isInBrowser&&this.isLocalStorageSupported)for(let e of o)if(localStorage.getItem(e))localStorage.removeItem(e);else continue}clearSession(){this.isInBrowser&&this.isLocalSessionSupported&&sessionStorage.clear()}remove(o){this.isInBrowser&&this.isLocalStorageSupported&&localStorage.removeItem(o)}removeSession(o){this.isInBrowser&&this.isLocalSessionSupported&&sessionStorage.removeItem(o)}static \u0275fac=function(e){return new(e||n)(L(D),L(Z))};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})};var Ce=n=>[n],be=n=>({"border-red-500":n});function _e(n,o){n&1&&(u(0,"p",10),p(1,"\u0634\u0645\u0627\u0631\u0647 \u0645\u0648\u0628\u0627\u06CC\u0644 \u0645\u0639\u062A\u0628\u0631 \u0646\u06CC\u0633\u062A"),a())}function xe(n,o){if(n&1){let e=I();u(0,"p",3),p(1,"\u0648\u0631\u0648\u062F \u0628\u0647 \u062D\u0633\u0627\u0628 \u06A9\u0627\u0631\u0628\u0631\u06CC"),a(),u(2,"p",4),p(3,"\u0644\u0637\u0641\u0627 \u0634\u0645\u0627\u0631\u0647 \u0645\u0648\u0628\u0627\u06CC\u0644 \u062E\u0648\u062F \u0631\u0627 \u0648\u0627\u0631\u062F \u06A9\u0646\u06CC\u062F."),a(),u(4,"div",5)(5,"input",6),_("input",function(){m(e);let i=l();return h(i.replaceNumber())}),a(),b(6,_e,2,0,"p",7),a(),u(7,"p",8),p(8,"\u0628\u0627 \u062B\u0628\u062A \u0646\u0627\u0645 \u062F\u0631 \u0627\u06CC\u0631\u0627\u0646 \u0648\u06CC\u0632\u0627 "),u(9,"span",9),p(10,"\u0642\u0648\u0627\u0646\u06CC\u0646 \u0648 \u0645\u0642\u0631\u0631\u0627\u062A"),a(),p(11," \u0645\u0627 \u0631\u0627 \u067E\u0630\u06CC\u0631\u0641\u062A\u0647 \u0627\u06CC\u062F"),a()}if(n&2){let e=l();c(4),f("ngClass",N(4,Ce,e.phoneNumberControl.invalid&&e.phoneNumberControl.touched?"mb-4":"mb-8")),c(),f("formControl",e.phoneNumberControl)("ngClass",N(6,be,e.phoneNumberControl.invalid&&e.phoneNumberControl.touched)),c(),f("ngIf",e.phoneNumberControl.invalid&&e.phoneNumberControl.touched)}}function ye(n,o){if(n&1){let e=I();u(0,"code-input",15),_("codeChanged",function(i){m(e);let s=l(2);return h(s.verifyCode=i)})("codeCompleted",function(){m(e);let i=l(2);return h(i.confirmVerifyCode())}),a()}n&2&&f("isCodeHidden",!1)("codeLength",4)("initialFocusField",0)("isCharsCode",!0)}function ve(n,o){if(n&1&&(u(0,"p",11),p(1,"\u062F\u0631\u06CC\u0627\u0641\u062A \u06A9\u062F \u062A\u0627\u06CC\u06CC\u062F"),a(),u(2,"p",4),p(3,"\u06A9\u062F \u062A\u0627\u06CC\u06CC\u062F \u06F4 \u0631\u0642\u0645\u06CC \u0628\u0647 \u0634\u0645\u0627\u0631\u0647 \u0645\u0648\u0628\u0627\u06CC\u0644 \u0634\u0645\u0627 \u0627\u0631\u0633\u0627\u0644 \u0634\u062F."),a(),u(4,"p",12),p(5),a(),b(6,ye,1,4,"code-input",13),u(7,"p",14),p(8,"\u0627\u0631\u0633\u0627\u0644 \u0645\u062C\u062F\u062F \u06A9\u062F \u062A\u0627\u06CC\u06CC\u062F"),a()),n&2){let e=l();c(5),k(e.phoneNumberControlValue),c(),w(e.isInBrowser?6:-1)}}var de=(e=>(e[e.phoneNumber=0]="phoneNumber",e[e.otp=1]="otp",e))(de||{}),pe=class n{constructor(o,e,t){this._repo=o;this.replaceNumberpipe=e;this.router=t;this.isInBrowser=this._repo.IsInBrowser}verifyCode="";isInBrowser=!0;loginStatus=0;loginStatusEnum=de;phoneNumberControl=new ie("",{validators:[A.required,A.pattern("^09(0[0-9]|1[0-9]|2[0-9]|3[0-9]|4[0-9]|9[0-9])-?[0-9]{3}-?[0-9]{4}$")],updateOn:"change"});get phoneNumberControlValue(){return this.phoneNumberControl.value}confirmVerifyCode(){console.log(this.verifyCode)}replaceNumber(){let o=this.replaceNumberpipe.transform(this.phoneNumberControl.value);this.phoneNumberControl.setValue(o)}handleLogin(o){o==0?this.loginStatus=1:this.verifyCode==="1111"&&this.router.navigate(["/home"])}static \u0275fac=function(e){return new(e||n)(C(S),C(y),C(Y))};static \u0275cmp=F({type:n,selectors:[["app-login"]],features:[J([y])],decls:6,vars:3,consts:[[1,"w-full","h-screen","flex","justify-center","items-center"],[1,"bg-gray-300","rounded-3xl","p-8","flex","flex-wrap","items-center","justify-center","w-full","md:w-8/12","lg:w-1/2","xl:w-1/2","shadow-xl"],["type","button",1,"w-full","bg-blue-700","font-bold","text-white","py-3","rounded-xl","mx-4",3,"click"],[1,"w-full","text-2xl","font-semibold","mb-4"],[1,"w-full","text-gray-600","mb-4"],[1,"w-full","flex","flex-wrap",3,"ngClass"],["type","text","placeholder","\u0634\u0645\u0627\u0631\u0647 \u0645\u0648\u0628\u0627\u06CC\u0644","maxlength","11","minLength","11",1,"w-full","bg-white","border","border-gray-300","placeholder:text-gray-400","rounded-xl","py-4","px-4","mb-4","focus:outline-none","focus:border-blue-700","focus:ring-1","focus:ring-blue-700",3,"input","formControl","ngClass"],["class","w-full text-sm text-red-500",4,"ngIf"],[1,"mb-8","text-sm","font-semibold","text-gray-800"],[1,"text-blue-800","font-semibold","text-sm"],[1,"w-full","text-sm","text-red-500"],[1,"w-full","text-xl","font-semibold","mb-4"],[1,"w-9/12","text-lg","text-gray-500","bg-white","mb-16","text-center","px-6","py-3","rounded-2xl"],[1,"w-8/12","mb-16",2,"direction","ltr !important",3,"isCodeHidden","codeLength","initialFocusField","isCharsCode"],[1,"w-full","text-sm","text-center","text-blue-500","mb-8"],[1,"w-8/12","mb-16",2,"direction","ltr !important",3,"codeChanged","codeCompleted","isCodeHidden","codeLength","initialFocusField","isCharsCode"]],template:function(e,t){e&1&&(u(0,"section",0)(1,"div",1),b(2,xe,12,8)(3,ve,9,2),u(4,"button",2),_("click",function(){return t.handleLogin(t.loginStatus)}),p(5),a()()()),e&2&&(c(2),w(t.loginStatus===t.loginStatusEnum.phoneNumber?2:-1),c(),w(t.loginStatus===t.loginStatusEnum.otp?3:-1),c(2),k(t.loginStatus===t.loginStatusEnum.phoneNumber?"\u062F\u0631\u06CC\u0627\u0641\u062A \u06A9\u062F":"\u062B\u0628\u062A \u06A9\u062F"))},dependencies:[le,ae,G,se,ee,te,oe,ne,$],encapsulation:2})};export{pe as LoginComponent};
